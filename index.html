<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Form Timer + GSheet (no error)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    #countdown {
      font-weight: bold;
      color: red;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h2>Form Quiz ss</h2>

  <div id="countdown">Time remaining: 30s</div>

  <!-- ✅ Target iframe for silent submission -->
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

  <form
    name="submit-to-google-sheet"
    id="quizForm"
    method="POST"
    action="https://script.google.com/macros/s/AKfycbzumVPz-83ImWAn8Aoq8cJVt_Hrqnj0KYCT-WAuH7wLYtj0WL1TOCJLaC2LEHSVQK0_CA/exec"
    target="hidden_iframe"
    onsubmit="handleSubmit()"
  >
    <input name="email" type="email" placeholder="Email" required /><br /><br />
    <input name="name" type="text" placeholder="Name" required /><br /><br />
    <textarea name="message" placeholder="Your message..." required></textarea><br /><br />
    <button type="submit">Submit</button>
  </form>

  <script>
    let timerDuration = 30;

    function startTimer(duration, formId) {
      let timeLeft = duration;
      const display = document.getElementById("countdown");
      const interval = setInterval(() => {
        display.textContent = `Time remaining: ${timeLeft}s`;
        timeLeft--;
        if (timeLeft < 0) {
          clearInterval(interval);
          document.getElementById(formId).requestSubmit();
        }
      }, 1000);
    }

    function handleSubmit() {
      // Delay redirect after submission
      setTimeout(() => {
        alert("✅ Form submitted successfully!");
        window.location.href = "thankyou.html";
      }, 1000);
    }

    // Start timer on load
    startTimer(timerDuration, "quizForm");
  </script>
</body>
</html>
